#	 ___      ___  ________  ___  ___  ________  
#	|"  \    /"  |/"       )|"  \/"  |/"       ) 
#	 \   \  //  /(:   \___/  \   \  /(:   \___/  
#	  \\  \/. ./  \___  \     \\  \/  \___  \    
#	   \.    //    __/  \\    /   /    __/  \\   
#	    \\   /    /" \   :)  /   /    /" \   :)  
#	     \__/    (_______/  |___/    (_______/   
# 
#      01010110  01010011  01011001  01010011   
#
# Auteur: Virgile de Champigny
#
# sudo apt install python3-numpy python3-matplotlib libatlas-base-dev
# /home/pi/klippy-env/bin/pip install -v numpy
#
####################################################################
# ADXL345 - ARDUINO NANO
####################################################################


[mcu nano]
serial = /dev/serial/by-id/usb-1a86_USB2.0-Serial-if00-port0
#   Executer ls /dev/serial/by-id/* pour obtenir le serial de votre arduino

#-----------------------------------------------------------------#

[adxl345]
cs_pin:nano:PB0

#-----------------------------------------------------------------#

[resonance_tester]
accel_chip: adxl345
max_smoothing: 0.25  # an example
min_freq: 5
max_freq: 80
#accel_per_hz: 25
probe_points:
     122.5, 122.5, 20

#-----------------------------------------------------------------#

#SHAPER_CALIBRATE AXIS=X -> Noozle
#SHAPER_CALIBRATE AXIS=Y -> Bed

[gcode_macro SHAPER_CALIBRATE_HOTEND]
description: Input Shaper hotend
gcode:
	{% if printer.idle_timeout.state == "Printing" %}
		RESPOND TYPE=error MSG="Interdiction de faire la calibration !"
	{% else %}
		{% if printer.toolhead.homed_axes != "xyz" %} G28 {% endif %}
		SHAPER_CALIBRATE AXIS=X
		SAVE_CONFIG
	{% endif %}

[gcode_macro SHAPER_CALIBRATE_BED]
description: Input Shaper plateau
gcode:
	{% if printer.idle_timeout.state == "Printing" %}
		RESPOND TYPE=error MSG="Interdiction de faire la calibration !"
	{% else %}
		{% if printer.toolhead.homed_axes != "xyz" %} G28 {% endif %}
		SHAPER_CALIBRATE AXIS=Y
		SAVE_CONFIG
	{% endif %}






